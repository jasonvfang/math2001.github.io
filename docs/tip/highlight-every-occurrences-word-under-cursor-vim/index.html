<html lang="en-us">
<head>
    <meta name="generator" content="Hugo 0.26" />
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
    
    <link rel=icon type=image/png href='/img/math2001.png'>
    <title>Highlight every occurrences of the word under the cursor in VIM - Math2001&#39;s blog</title>

    
    
    
    
    
    <link rel="stylesheet" href="/css/colorschemes/tomorrow-night.css">
    <link rel="stylesheet" href="/css/common.css">
    <link rel="stylesheet" href="/css/regular.css">
    

</head>
<body>

    <div class="wrapper">
    
    <header>
        <h2 class="header-brand"><a href="/">Math2001&#39;s blog</a></h2>
        <nav class="nav">
    <ul class="nav-list">
        
        
        <li class="nav-list-item"><a href="/post/">Posts</a></li>
        
        
        <li class="nav-list-item"><a href="/project/">Projects</a></li>
        
        
        <li class="nav-list-item"><a href="/tip/">Tips</a></li>
        
        
        <li class="nav-list-item nav-separator"></li>
        
        <li class="nav-list-item"><a href="/categories/">Categories</a></li>
        
        
        <li class="nav-list-item"><a href="/tags/">Tags</a></li>
        
    </ul>
</nav>

        
            <div class="header-search">
                <input type="search" placeholder="Search...">
            </div>
        
    </header>
    
    <main>




<div class="page-top">
    <h1 class="page-title">Highlight every occurrences of the word under the cursor in VIM</h1>
    
    <ul class="page-categories categories">
        
        <li><a href="/categories/cool-feature">cool feature</a></li>
        
    </ul>
    
    <ul class="page-tags tags">
        
        <li><a href="/tags/vim">vim</a></li>
        
        <li><a href="/tags/vimscript">vimscript</a></li>
        
    </ul>
</div>

<section class="page-content"><p>[ A feature of Sublime Text I really enjoyed was highlighting every occurrence of ]
the selected word.</p>

<p>So, here&rsquo;s the VIM way. It&rsquo;s not implemented by default, but a bit of vimscript
never hurt anyone, right?</p>

<p>So, it&rsquo;s going to be a bit different than Sublime Text&rsquo;s version, because I
thinks it&rsquo;s even better, but it&rsquo;s up to you to tweak this if you want to ;)</p>

<p>It&rsquo;s going to be a function that does this:</p>

<ul>
<li>if the cursor is on a word that has been highlighted

<ul>
<li>clear the highlights</li>
</ul></li>
<li>otherwise, simply highlight the matches</li>
</ul>

<p>So, here&rsquo;s our function:</p>

<pre><code class="language-vim">function! ToggleHighlightWordUnderCursor()
    &quot; get the current matches
    let matches = getmatches()
    &quot; get the word under the cursor
    let cword = expand('&lt;cword&gt;')
    &quot; if there is some matches AND the cursor is on one of them
    if !empty(matches) &amp;&amp; printf('\&lt;%s\&gt;', cword) ==# matches[0]['pattern']
        match none
        echo &quot;Matches cleared&quot;
    else
        &quot; highlight the matches with the 'scope' IncSearch (the one used when you
        &quot; do a regular search)
        silent! exe printf('match IncSearch /\&lt;%s\&gt;/', cword)
        &quot; Extra: echo how many matches there is
        redir =&gt; nbmatches
            silent! exe &quot;%s/&quot;.cword.&quot;//gn&quot;
        redir END
        let nbmatches = str2nr(Strip(split(nbmatches, ' ')[0]))
        echo printf('Found %s match%s', nbmatches, nbmatches &gt; 1 ? 'es' : '')
        &quot; move cursor back to its previous position, since it has been moved to
        &quot; the beginning of the line by :match 
        execute &quot;normal! \&lt;C-o&gt;&quot;
    endif
endfunction
</code></pre>

<p>And now, just bind it to a shortcut:</p>

<pre><code class="language-vim">nnoremap &lt;silent&gt; &lt;leader&gt;w :call ToggleHighlightWordUnderCursor()&lt;CR&gt;
&quot; for convenience
nnoremap &lt;silent&gt; &lt;leader&gt;W :match none&lt;CR&gt;
</code></pre>

<p>So now, just press <kbd>&lt;leader&gt;w</kbd>.</p>

<p>Pressing <kbd>&lt;leader&gt;W</kbd> will clear the highlights, wherever you are.</p>
</section>

<div class="page-bottom">
    <p class="page-date">Published on Tuesday 22 August 2017</p>
</div>

    </main>
</div>
<footer>
    <p>Â© Mathieu Paturel 2017.
    Powered by <a href="https://gohugo.io" target="_blank" rel="noopener">Hugo</a>, theme
    <a href="https://github.com/math2001/fasty">Fasty</a> by <a href="https://github.com/math2001">@math2001</a>.</p>
</footer>

<script type="text/javascript">
function loadCSS(stylesheets) {
    let media, link
    for (let stylesheet of stylesheets) {
        console.log('load', stylesheet.href)
        media = stylesheet.media ? ' media="' + stylesheet.media + '"' : ''
        link = '<link rel="stylesheet" type="text/css" href="'
                + "/" + "css/" + stylesheet.href + '"' + media + '>'
        document.head.innerHTML += link

    }
}
function loadJs(scripts) {
    for (let key in scripts) {
        tag = document.createElement('script')
        tag.onload = "/" + 'js/' + scripts[key]
        tag.src = key
        document.body.appendChild(tag)
    }
}
loadCSS([{ href: 'phone.css', media: 'screen and (max-width: 600px)' }])

</script>



<script type="text/javascript" src="/js/highlight.pack.js"></script>
<script type="text/javascript">hljs.initHighlightingOnLoad()</script>



</body>
</html>

